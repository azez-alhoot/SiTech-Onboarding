{% extends 'base.html' %}

{% load static %}

{% block cssimport %}
<link rel="stylesheet" href="{% static 'css/tracks.css' %}" type="text/css">{% endblock %}

{% block title %}Tracks{% endblock %}

{% block content %}
<div class="container-fluid p-2 text-center ">
    <nav aria-label="breadcrumb" class="w-50 border border-white bg-white d-flex mx-auto mb-3 rounded-pill">
        <ol class="breadcrumb p-2 mx-auto m-0">
            <li class="breadcrumb-item active p-2 " aria-current="page">Tracks</li>
        </ol>
    </nav>
    <br>
    <p class="fw-bold fs-5">Tracks are your targeted career path, they represent the job title you are seeking!</p>

</div>

<div class=" d-flex justify-content-center p-2 mx-auto">

    {% for track in tracks %}

    <div class="card m-4 p-4 col-4 border-1 rounded shadow-lg">
        <img class=" img-thumbnail track-images d-block" src="{{ track.image.url }}" alt="Card image cap">
        <div class="card-body d-flex flex-column justify-content-between">
            <div>
                <h5 class="card-title mt-2 p-0 fw-bold fs-3">{{ track.name }}</h5>
                <p class="card-text text-wrap p-0 my-4">{{ track.description }}</p>
                <a class="btn btn-primary" href="{% url 'track' track.id %}">View Track</a>
            </div>

            {% if track.name not in user_tracks_list %}
            <form action="{% url 'user_track_view' user.id track.id %}" id="zaform" method="POST">
                {% csrf_token %}
                <button class="btn btn-primary" id="dont" data-bs-toggle="modal" data-bs-target="#staticBackdrop">Enroll</button>

                <!-- Modal -->
                <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false"
                    tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="staticBackdropLabel"><b>Track Enrollment</b></h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                               <b>Holy guacamole!</b>  
                                <br> 
                                You're going to enroll yourself in the <b>{{ track.name }}</b> track! Awesome dude :D All the
                                best of luck buddy ;)
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Nah, I'd like
                                    another track</button>
                                <button type="button" class="btn btn-primary" style="width: max-content;" id="yes" type="submit" >Sure, Enroll me!</button>
                            </div>
                        </div>
                    </div>
                </div>

            </form>
            {% endif %}

            {% if request.user.is_superuser %}
            <a href="{% url 'edit_track_form' track.id %}" class="btn btn-primary">Edit Track</a>
            {% endif %}
        </div>
    </div>

    {% endfor %}
</div>







{% endblock %}

{% block js %}
<script>

$('#dont').on("click",function(e){
    e.preventDefault();
});

$('#yes').on("click",function(){
    $('#zaform').submit()
});


</script>
{% endblock %}